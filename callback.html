<!-- profile.html -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>My Profile</title>
  </head>
  <body>
    <img id="avatar" src="" alt="Avatar">
    <h1 id="username"></h1>

    <script>
      // Get the authorization code from the URL query parameters
      const code = new URLSearchParams(window.location.search).get('code');

      // Exchange the authorization code for an access token
      fetch('https://discord.com/api/oauth2/token', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: new URLSearchParams({
          client_id: 'YOUR_CLIENT_ID',
          client_secret: 'YOUR_CLIENT_SECRET',
          grant_type: 'authorization_code',
          code: code,
          redirect_uri: 'YOUR_REDIRECT_URI',
          scope: 'identify'
        })
      })
      .then(response => response.json())
      .then(data => {
        // Use the access token to get the user's profile information
        fetch('https://discord.com/api/users/@me', {
          headers: {
            'Authorization': `Bearer ${data.access_token}`
          }
        })
        .then(response => response.json())
        .then(user => {
          // Display the user's profile information on the page
          document.getElementById('avatar').src = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;
          document.getElementById('username').textContent = user.username;
        });
      });
    </script>
  </body>
</html>
